<!doctype html>
<html lang="es" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión del Tiempo en Entornos Clínicos</title>
    <meta name="description" content="Curso autogestionable sobre la gestión eficiente del tiempo para personal clínico y administrativo en el sector salud.">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom Styles -->
    <style>
        /* Estilos base y variables de color */
        :root {
            --color-primary: #00acb6;
            --color-secondary: #81358a;
            --color-accent: #9c61a4;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Estilos para la barra de scroll */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }
        
        .dark ::-webkit-scrollbar-track {
             background-color: #2d3748;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #ccc;
            border-radius: 10px;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background-color: #4a5568;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #b3b3b3;
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background-color: #718096;
        }
        
        /* Contenedor responsivo para videos de YouTube */
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Estilo para el enlace activo en la tabla de contenidos */
        .toc-link.active {
            background-color: var(--color-primary);
            color: white;
            font-weight: 600;
        }
        
        .dark .toc-link.active {
            background-color: var(--color-primary);
        }

        /* ===== Estilos para el Juego de Memorama (Módulo 1) ===== */
        #evaluacion-modulo-1 {
            --memorama-shadow-light: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
            --memorama-shadow-dark: 0 4px 10px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
            --memorama-card-front-light: #e2e8f0;
            --memorama-card-front-dark: #2d3748;
            --memorama-card-back-light: var(--color-primary);
            --memorama-card-back-dark: var(--color-secondary);
        }

        #evaluacion-modulo-1 .memorama-game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        #evaluacion-modulo-1 .memorama-card {
            background-color: transparent;
            height: 120px;
            perspective: 1000px;
            cursor: pointer;
            position: relative;
        }

        #evaluacion-modulo-1 .memorama-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 12px;
            box-shadow: var(--memorama-shadow-light);
        }
        
        .dark #evaluacion-modulo-1 .memorama-card-inner {
            box-shadow: var(--memorama-shadow-dark);
        }

        #evaluacion-modulo-1 .memorama-card-inner.is-flipped {
            transform: rotateY(180deg);
        }

        #evaluacion-modulo-1 .memorama-card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            padding: 1rem;
            box-sizing: border-box;
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            word-wrap: break-word;
            overflow: hidden;
        }

        #evaluacion-modulo-1 .memorama-card-back {
            background-color: var(--memorama-card-back-light);
            color: white;
        }

        #evaluacion-modulo-1 .memorama-card-front {
            background-color: var(--memorama-card-front-light);
            color: #2d3748;
            transform: rotateY(180deg);
        }

        .dark #evaluacion-modulo-1 .memorama-card-back {
            background-color: var(--memorama-card-back-dark);
        }
        .dark #evaluacion-modulo-1 .memorama-card-front {
            background-color: var(--memorama-card-front-dark);
            color: #e2e8f0;
        }

        #evaluacion-modulo-1 .memorama-card:focus-visible {
            outline: 2px solid var(--color-accent);
            outline-offset: 4px;
        }

        #evaluacion-modulo-1 .memorama-progress-bar-container {
            width: 100%;
            height: 25px;
            background-color: #e2e8f0;
            border-radius: 9999px;
            margin: 1.5rem 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .dark #evaluacion-modulo-1 .memorama-progress-bar-container {
             background-color: #4a5568;
        }

        #evaluacion-modulo-1 .memorama-progress-bar {
            height: 100%;
            background-color: var(--color-primary);
            width: 0%;
            transition: width 0.5s ease-in-out;
            border-radius: 9999px;
        }

        #evaluacion-modulo-1 .memorama-congrats {
            text-align: center;
            padding: 2rem;
            background-color: var(--memorama-card-front-light);
            border-radius: 12px;
            box-shadow: var(--memorama-shadow-light);
            margin-top: 2rem;
            display: none;
        }
        
        .dark #evaluacion-modulo-1 .memorama-congrats {
            background-color: var(--memorama-card-front-dark);
            box-shadow: var(--memorama-shadow-dark);
        }
        
        #evaluacion-modulo-1 .memorama-congrats h2 {
            color: var(--color-primary);
            font-size: 1.8rem;
        }

        @media (max-width: 600px) {
            #evaluacion-modulo-1 .memorama-game-board {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }

        /* ===== Estilos para Actividad Matriz Eisenhower (Módulo 2) ===== */
        #evaluacion-modulo-2 {
            --eisenhower-shadow-light: rgba(0, 0, 0, 0.08);
            --eisenhower-shadow-dark: rgba(0, 0, 0, 0.5);
            --eisenhower-card-bg-light: #ffffff;
            --eisenhower-card-bg-dark: #2d3748;
            --eisenhower-border-light: #e0e6ed;
            --eisenhower-border-dark: #4a5568;
        }

        #evaluacion-modulo-2 .eisenhower-card {
            background-color: var(--eisenhower-card-bg-light);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 8px 16px var(--eisenhower-shadow-light);
            border: 1px solid var(--eisenhower-border-light);
        }

        .dark #evaluacion-modulo-2 .eisenhower-card {
            background-color: var(--eisenhower-card-bg-dark);
            box-shadow: 0 8px 16px var(--eisenhower-shadow-dark);
            border: 1px solid var(--eisenhower-border-dark);
        }

        #evaluacion-modulo-2 .task-list {
            list-style: none;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #evaluacion-modulo-2 .task-item {
            cursor: grab;
            background-color: var(--color-accent);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            font-weight: 600;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s;
            touch-action: none; /* Previene scroll en móvil al arrastrar */
        }

        #evaluacion-modulo-2 .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        #evaluacion-modulo-2 .task-item:active {
            cursor: grabbing;
        }
        
        /* Estilo para el elemento que se está arrastrando */
        #evaluacion-modulo-2 .task-item.dragging {
            opacity: 0.5;
        }


        #evaluacion-modulo-2 .eisenhower-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        #evaluacion-modulo-2 .quadrant {
            background-color: #f0f4f7;
            border: 2px dashed #e0e6ed;
            border-radius: 10px;
            min-height: 180px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: background-color 0.3s;
        }

        .dark #evaluacion-modulo-2 .quadrant {
            background-color: #3b4252;
            border-color: #4a5568;
        }

        #evaluacion-modulo-2 .quadrant.dragover {
            background-color: #e6f7ff;
            border-color: var(--color-accent);
        }

        .dark #evaluacion-modulo-2 .quadrant.dragover {
            background-color: #4c566a;
        }

        #evaluacion-modulo-2 .quadrant h3 {
            margin: 0;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-secondary);
        }

        #evaluacion-modulo-2 .message-container {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: #e8f5e9;
            border: 1px solid #4caf50;
            color: #2e7d32;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
        .dark #evaluacion-modulo-2 .message-container {
            background-color: #2d422f;
            color: #66bb6a;
            border: 1px solid #66bb6a;
        }
        #evaluacion-modulo-2 .feedback-message {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }
        #evaluacion-modulo-2 .feedback-correct { color: #4caf50; }
        .dark #evaluacion-modulo-2 .feedback-correct { color: #81c784; }
        #evaluacion-modulo-2 .feedback-incorrect { color: #f44336; }
        .dark #evaluacion-modulo-2 .feedback-incorrect { color: #e57373; }

        @media (max-width: 768px) {
            #evaluacion-modulo-2 .eisenhower-grid {
                grid-template-columns: 1fr;
            }
            #evaluacion-modulo-2 .task-list {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* ===== Estilos para Sopa de Letras (Módulo 3) ===== */
        #evaluacion-modulo-3 .wordsearch-container {
            background-color: var(--eisenhower-card-bg-light);
            border-radius: 12px;
            box-shadow: 0 8px 16px var(--eisenhower-shadow-light);
            overflow: hidden;
        }
        .dark #evaluacion-modulo-3 .wordsearch-container {
             background-color: var(--eisenhower-card-bg-dark);
             box-shadow: 0 8px 16px var(--eisenhower-shadow-dark);
        }

        #evaluacion-modulo-3 .wordsearch-header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }
        #evaluacion-modulo-3 .wordsearch-header h4 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        #evaluacion-modulo-3 .wordsearch-game-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            padding: 1.5rem;
        }
        @media (min-width: 1024px) {
            #evaluacion-modulo-3 .wordsearch-game-area {
                grid-template-columns: 1fr 300px;
            }
        }

        #evaluacion-modulo-3 .wordsearch-grid {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 2px;
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 15px;
            touch-action: none; /* Previene scroll en sopa de letras */
        }
        .dark #evaluacion-modulo-3 .wordsearch-grid {
            background: #1f2937;
        }

        #evaluacion-modulo-3 .wordsearch-cell {
            width: 100%;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-weight: 600;
            font-size: clamp(0.6rem, 2.5vw, 0.9rem);
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }
        .dark #evaluacion-modulo-3 .wordsearch-cell {
            background: var(--eisenhower-card-bg-dark);
            border-color: var(--eisenhower-border-dark);
        }

        #evaluacion-modulo-3 .wordsearch-cell:hover {
            background: #e3f2fd;
        }
        .dark #evaluacion-modulo-3 .wordsearch-cell:hover {
            background: #374151;
        }

        #evaluacion-modulo-3 .wordsearch-cell.selected {
            background-color: var(--color-primary);
            color: white;
            border-color: var(--color-secondary);
        }
        #evaluacion-modulo-3 .wordsearch-cell.found {
            background-color: var(--color-accent);
            color: white;
            border-color: var(--color-secondary);
        }

        #evaluacion-modulo-3 .wordsearch-sidebar {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            height: fit-content;
        }
         .dark #evaluacion-modulo-3 .wordsearch-sidebar {
            background: #1f2937;
        }

        #evaluacion-modulo-3 .word-item {
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            background: white;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .dark #evaluacion-modulo-3 .word-item {
            background: var(--eisenhower-card-bg-dark);
        }
        #evaluacion-modulo-3 .word-item.found {
            background: #e8f4f5;
            color: var(--color-primary);
            text-decoration: line-through;
        }
         .dark #evaluacion-modulo-3 .word-item.found {
            background-color: #314d4e;
        }

        #evaluacion-modulo-3 .word-item .checkmark {
            margin-left: auto;
            color: var(--color-accent);
            font-weight: bold;
        }
        
        #evaluacion-modulo-3 .wordsearch-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        #evaluacion-modulo-3 .wordsearch-modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            margin: 1rem;
        }
        .dark #evaluacion-modulo-3 .wordsearch-modal-content {
            background: var(--eisenhower-card-bg-dark);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

    <!-- Contenedor principal de la aplicación -->
    <div id="app-container">

        <!-- ===== HEADER (STICKY) ===== -->
        <header class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-40">
            <!-- Barra de progreso del curso -->
            <div class="h-1 bg-primary" id="progressBar" style="width: 0%; background-color: var(--color-primary);"></div>
            
            <div class="container mx-auto px-4 py-3">
                <div class="flex justify-between items-center">
                    <!-- Logo y Título -->
                    <div class="flex items-center gap-3">
                        <img src="https://i.imgur.com/wNPXExU.png" alt="Logotipo de la institución" class="h-10 w-auto">
                        <h1 class="text-lg font-bold text-gray-700 dark:text-gray-100 hidden sm:block">
                            Gestión del Tiempo
                        </h1>
                    </div>

                    <!-- Buscador -->
                    <div class="relative flex-1 max-w-xs mx-4">
                        <input type="search" id="search-input" placeholder="Buscar en el curso..." class="w-full pl-10 pr-4 py-2 border rounded-full bg-gray-100 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary" style="--tw-ring-color: var(--color-primary);">
                        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>

                    <!-- Controles: Modo Oscuro y Menú Móvil -->
                    <div class="flex items-center gap-2">
                        <button id="theme-toggle" aria-label="Cambiar modo claro/oscuro" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary" style="--tw-ring-offset-color: var(--color-primary);">
                            <svg id="theme-icon-light" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                            <svg id="theme-icon-dark" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                        </button>
                        <button id="menu-toggle" aria-label="Abrir menú de navegación" class="p-2 rounded-full lg:hidden hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary" style="--tw-ring-offset-color: var(--color-primary);">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Contenedor del cuerpo principal (Sidebar + Contenido) -->
        <div class="container mx-auto">
            <div class="lg:grid lg:grid-cols-[280px_1fr] lg:gap-8">

                <!-- ===== ASIDE (TABLE OF CONTENTS) ===== -->
                <aside id="toc-sidebar" class="fixed inset-y-0 left-0 bg-white dark:bg-gray-800 w-72 p-4 transform -translate-x-full transition-transform duration-300 ease-in-out lg:translate-x-0 lg:sticky lg:top-16 lg:h-[calc(100vh-4rem)] z-30 overflow-y-auto shadow-lg lg:shadow-none">
                    <nav aria-label="Índice del curso">
                        <h2 class="text-lg font-bold mb-4 border-b pb-2 border-gray-200 dark:border-gray-700">Contenido del Curso</h2>
                        <ul class="space-y-2">
                            <li><a href="#introduccion" class="toc-link block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Introducción</a></li>
                            <li><a href="#objetivo" class="toc-link block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Objetivo General</a></li>
                            <li>
                                <a href="#modulo1" class="toc-link block px-3 py-2 rounded-md font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Módulo 1</a>
                                <ul class="pl-4 mt-2 space-y-2 text-sm">
                                    <li><a href="#tema1-1" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Conceptos</a></li>
                                    <li><a href="#tema1-2" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Prioridades</a></li>
                                    <li><a href="#tema1-3" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Costos</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#modulo2" class="toc-link block px-3 py-2 rounded-md font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Módulo 2</a>
                                <ul class="pl-4 mt-2 space-y-2 text-sm">
                                    <li><a href="#tema2-1" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Agendas</a></li>
                                    <li><a href="#tema2-2" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Técnicas</a></li>
                                    <li><a href="#tema2-3" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Interrupciones</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#modulo3" class="toc-link block px-3 py-2 rounded-md font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Módulo 3</a>
                                 <ul class="pl-4 mt-2 space-y-2 text-sm">
                                    <li><a href="#tema3-1" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Delegación</a></li>
                                    <li><a href="#tema3-2" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Equipo</a></li>
                                    <li><a href="#tema3-3" class="toc-link block px-3 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Autocuidado</a></li>
                                </ul>
                            </li>
                            <li><a href="#formatos" class="toc-link block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Formatos de Apoyo</a></li>
                            <li><a href="#conclusion" class="toc-link block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Conclusión</a></li>
                        </ul>
                    </nav>
                </aside>

                <!-- Overlay para cerrar el menú en móvil -->
                <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden"></div>

                <!-- ===== MAIN CONTENT ===== -->
                <main class="py-8 px-4">
                    <!-- Breadcrumbs -->
                    <nav aria-label="Breadcrumb" class="mb-6 text-sm text-gray-500 dark:text-gray-400">
                        <ol class="list-none p-0 inline-flex">
                            <li class="flex items-center">
                                <a href="#" class="hover:underline">Cursos</a>
                                <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                            </li>
                            <li>
                                <span>Gestión del Tiempo en Entornos Clínicos</span>
                            </li>
                        </ol>
                    </nav>

                    <article id="curso-contenido" class="prose dark:prose-invert max-w-none">
                        
                        <h1 class="text-4xl font-bold text-gray-900 dark:text-white" style="color: var(--color-secondary);">Gestión del Tiempo en Entornos Clínicos</h1>
                        
                        <!-- Sección: Introducción -->
                        <section id="introduccion" class="course-section mb-12">
                            <p>La gestión del tiempo es una habilidad esencial en el entorno clínico, donde las demandas son constantes, las urgencias imprevistas y la atención a los pacientes requiere precisión y organización. Tanto el personal de salud como el administrativo enfrentan retos diarios para cumplir con sus responsabilidades, sin comprometer la calidad del servicio ni su bienestar personal.</p>
                            <p>Una clínica bien organizada no solo mejora la atención a los pacientes, sino que también reduce el estrés del personal y optimiza los recursos disponibles.</p>
                        </section>

                        <!-- Sección: Objetivo General -->
                        <section id="objetivo" class="course-section mb-12 bg-blue-50 dark:bg-gray-800 p-6 rounded-lg border-l-4" style="border-color: var(--color-primary);">
                             <h2 class="text-2xl font-bold mt-0" style="color: var(--color-primary);">Objetivo general</h2>
                            <p>Desarrollar en el personal clínico, administrativo y de apoyo las competencias necesarias para gestionar el tiempo de manera eficiente, mejorando la atención al paciente, optimizando procesos administrativos y fomentando un ambiente laboral más productivo y saludable.</p>
                        </section>

                        <section class="course-section mb-12">
                            <h2 class="text-2xl font-bold" style="color: var(--color-secondary);">¿Por qué es importante la gestión del tiempo en una clínica?</h2>
                            <p class="mt-4">En el sector salud, el tiempo es un recurso limitado y crítico. Una mala gestión puede llevar a retrasos en consultas, errores en procedimientos, burnout en el personal y una experiencia insatisfactoria para los pacientes. Según estudios de organizaciones como la Organización Mundial de la Salud (OMS), una gestión óptima del tiempo reduce el estrés laboral en hasta un 30% y mejora la eficiencia operativa. En una clínica, donde se manejan emergencias impredecibles, agendas saturadas y tareas administrativas, dominar esta habilidad no solo optimiza el flujo de trabajo, sino que también fomenta un ambiente colaborativo y sostenible.</p>
                        </section>

                        <!-- Módulo 1 -->
                        <section id="modulo1" class="course-section mb-12 pt-4">
                            <h2 class="text-3xl font-bold border-b-2 pb-2" style="border-color: var(--color-accent);">Módulo 1: Fundamentos de la gestión del tiempo en el sector salud</h2>
                            <div class="space-y-6 mt-6">
                                <article id="tema1-1" class="course-section-item">
                                    <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Concepto de gestión del tiempo
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Uso eficiente y consciente del tiempo para alcanzar metas específicas en un período determinado.</p>
                                            <p><strong>En salud:</strong> Planificar consultas, procedimientos, tareas administrativas y emergencias sin afectar la calidad de la atención.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Un médico que organiza sus citas evitando retrasos excesivos que impacten en la sala de espera.</p>
                                        </div>
                                    </details>
                                </article>
                                <article id="tema1-2" class="course-section-item">
                                     <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Identificación de prioridades (urgente vs importante)
                                             <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Diferenciar entre lo que requiere atención inmediata y lo que aporta valor a largo plazo.</p>
                                            <p><strong>En salud:</strong> Atender un paro cardiorrespiratorio (urgente) vs. preparar reportes de estadísticas mensuales (importante).</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Una enfermera que interrumpe la preparación de informes para responder a una alarma en monitor.</p>
                                        </div>
                                    </details>
                                </article>
                                <article id="tema1-3" class="course-section-item">
                                     <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Costos de la mala gestión del tiempo
                                             <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Consecuencias negativas de no organizar adecuadamente el tiempo.</p>
                                            <p><strong>En salud:</strong> Retrasos en atención, desgaste emocional, pérdida de confianza de pacientes.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Citas acumuladas que generan reclamos y estrés en recepción.</p>
                                        </div>
                                    </details>
                                </article>
                                <div class="video-container rounded-lg shadow-lg overflow-hidden">
                                    <iframe loading="lazy" src="https://www.youtube.com/embed/r0SbYT596Bc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                            <button id="btn-evaluacion-modulo-1" class="inline-block mt-8 px-8 py-3 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105" style="background-color: var(--color-secondary);">Realizar Evaluación del Módulo 1</button>
                            
                            <!-- Contenedor para la Actividad del Módulo 1 -->
                            <section id="evaluacion-modulo-1" class="hidden mt-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-inner">
                                <h3 class="text-2xl font-bold text-center mb-4" style="color: var(--color-secondary);">Memorama: Fundamentos Clave</h3>
                                <p class="text-center">Voltea las tarjetas y encuentra las parejas correctas de conceptos y definiciones.</p>
                                <div class="memorama-progress-bar-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Progreso del juego">
                                    <div id="memorama-progress-bar-1" class="memorama-progress-bar"></div>
                                </div>
                                <div id="memorama-game-board-1" class="memorama-game-board" aria-live="polite"></div>
                                <div id="memorama-congrats-1" class="memorama-congrats" role="status">
                                    <h2 class="text-2xl font-bold">¡Felicidades, lo has logrado!</h2>
                                    <p class="mt-2">Has encontrado todas las parejas. ¡Excelente trabajo!</p>
                                    <a href="https://script.google.com/macros/s/AKfycbyQK85_suh3jow0p8RT33pAvLDtcFMU_jujAOiHJ_8qVWHR9CtH39AHepSNdobOuUwE/exec" target="_blank" rel="noopener noreferrer" class="inline-block mt-4 px-6 py-2 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105" style="background-color: var(--color-primary);">Ir a la Encuesta Final del Módulo</a>
                                </div>
                            </section>
                        </section>

                         <!-- Módulo 2 -->
                        <section id="modulo2" class="course-section mb-12 pt-4">
                            <h2 class="text-3xl font-bold border-b-2 pb-2" style="border-color: var(--color-accent);">Módulo 2: Herramientas prácticas para la organización diaria</h2>
                            <div class="space-y-6 mt-6">
                                <article id="tema2-1" class="course-section-item">
                                    <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Uso de agendas y calendarios
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Sistemas físicos o digitales para planificar tareas y citas.</p>
                                            <p><strong>En salud:</strong> Programar consultas médicas, turnos de enfermería, controles administrativos.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Uso de Google Calendar para coordinar reuniones de equipo y evitar duplicidades.</p>
                                        </div>
                                    </details>
                                </article>
                                <article id="tema2-2" class="course-section-item">
                                     <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Técnicas de productividad (Pomodoro, Bloques de tiempo)
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Métodos para mejorar la concentración y evitar interrupciones.</p>
                                            <p><strong>En salud:</strong> Aplicar intervalos de trabajo enfocado con pausas cortas para revisar expedientes o llenar formularios.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Un administrativo usa bloques de 25 min para digitalizar historias clínicas y luego toma 5 min de descanso.</p>
                                        </div>
                                    </details>
                                </article>
                                <article id="tema2-3" class="course-section-item">
                                     <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Gestión de interrupciones
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Estrategias para manejar imprevistos sin perder eficiencia.</p>
                                            <p><strong>En salud:</strong> Atender llamadas urgentes sin abandonar completamente otras tareas.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Una recepcionista que pausa su tarea administrativa para atender a un paciente en ventanilla y retoma con un checklist.</p>
                                        </div>
                                    </details>
                                </article>
                                <div class="video-container rounded-lg shadow-lg overflow-hidden">
                                    <iframe loading="lazy" src="https://www.youtube.com/embed/2vXB24qZeIs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                            <button id="btn-evaluacion-modulo-2" class="inline-block mt-8 px-8 py-3 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105" style="background-color: var(--color-secondary);">Realizar Evaluación del Módulo 2</button>
                            
                            <!-- Contenedor para la Actividad del Módulo 2 -->
                            <section id="evaluacion-modulo-2" class="hidden mt-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-inner">
                                <h3 class="text-2xl font-bold text-center mb-2" style="color: var(--color-secondary);">Actividad: Matriz de Eisenhower</h3>
                                <p class="text-center">Arrastra cada tarea al cuadrante correcto para clasificarla según su urgencia e importancia.</p>
                                
                                <div id="progress-bar-container-2" class="memorama-progress-bar-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Progreso de la actividad">
                                    <div id="eisenhower-progress-bar-2" class="memorama-progress-bar"></div>
                                </div>

                                <div class="lg:grid lg:grid-cols-3 lg:gap-6">
                                    <div class="lg:col-span-1 mb-6 lg:mb-0">
                                        <div class="eisenhower-card h-full">
                                            <h4 class="text-lg font-bold text-center">Tareas para clasificar</h4>
                                            <ul id="task-list-2" class="task-list mt-4">
                                                <!-- Tareas se insertan dinámicamente aquí -->
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="lg:col-span-2">
                                        <div class="eisenhower-grid">
                                            <div id="do-quadrant-2" class="quadrant" data-quadrant="do" role="region" aria-label="Cuadrante de Hacer: Urgente e Importante" tabindex="0">
                                                <h3>Urgente e Importante</h3>
                                            </div>
                                            <div id="plan-quadrant-2" class="quadrant" data-quadrant="plan" role="region" aria-label="Cuadrante de Planificar: No Urgente e Importante" tabindex="0">
                                                <h3>Importante y No Urgente</h3>
                                            </div>
                                            <div id="delegate-quadrant-2" class="quadrant" data-quadrant="delegate" role="region" aria-label="Cuadrante de Delegar: Urgente y No Importante" tabindex="0">
                                                <h3>Urgente y No Importante</h3>
                                            </div>
                                            <div id="eliminate-quadrant-2" class="quadrant" data-quadrant="eliminate" role="region" aria-label="Cuadrante de Eliminar: No Urgente y No Importante" tabindex="0">
                                                <h3>No Urgente y No Importante</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="feedback-message-2" class="message-container" role="status" aria-live="assertive">
                                    <p>¡Felicitaciones! Has clasificado todas las tareas correctamente. ¡Ahora puedes continuar!</p>
                                    <a href="https://script.google.com/macros/s/AKfycbx73oRytMmpqqnMZl9vAcJz0FfJwWgJHOn2atTubMnx1hM90tzPBnUB4Ueb_OewrThf/exec" class="inline-block mt-4 px-6 py-2 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105" style="background-color: var(--color-primary);" target="_blank" rel="noopener noreferrer" aria-label="Ir a la evaluación final del módulo">Ir a la evaluación final</a>
                                </div>
                            </section>
                        </section>

                        <!-- Módulo 3 -->
                        <section id="modulo3" class="course-section mb-12 pt-4">
                            <h2 class="text-3xl font-bold border-b-2 pb-2" style="border-color: var(--color-accent);">Módulo 3: Estrategias de equipo y autocuidado en la gestión del tiempo</h2>
                            <div class="space-y-6 mt-6">
                                <article id="tema3-1" class="course-section-item">
                                    <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Delegación de tareas
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Asignar responsabilidades a la persona adecuada para optimizar el tiempo.</p>
                                            <p><strong>En salud:</strong> Delegar registros de datos a auxiliares para que el médico se concentre en diagnóstico y tratamiento.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Un jefe administrativo delega la impresión de reportes a un asistente para centrarse en análisis de indicadores.</p>
                                        </div>
                                    </details>
                                </article>
                                <article id="tema3-2" class="course-section-item">
                                     <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Trabajo en equipo y comunicación efectiva
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Coordinación entre miembros para evitar duplicación de tareas o retrasos.</p>
                                            <p><strong>En salud:</strong> Coordinación entre médicos, enfermería y administración en el flujo de un paciente.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Un enfermero informa al médico sobre un cambio en los signos vitales antes de que llegue a la habitación.</p>
                                        </div>
                                    </details>
                                </article>
                                <article id="tema3-3" class="course-section-item">
                                     <details class="bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden">
                                        <summary class="p-4 cursor-pointer font-semibold text-lg flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700">Autocuidado y manejo del estrés
                                            <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                                        </summary>
                                        <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                                            <p><strong>Definición:</strong> Estrategias para cuidar la salud física y mental, mejorando la eficiencia laboral.</p>
                                            <p><strong>En salud:</strong> Tomar pausas activas, evitar la sobrecarga y promover el equilibrio entre trabajo y descanso.</p>
                                            <p class="mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-md"><strong>Ejemplo:</strong> Un administrativo que organiza su agenda para evitar quedarse horas extra constantemente.</p>
                                        </div>
                                    </details>
                                </article>
                                <div class="video-container rounded-lg shadow-lg overflow-hidden">
                                    <iframe loading="lazy" src="https://www.youtube.com/embed/2Lf9o7Kd88k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                                <blockquote class="mt-6 p-4 border-l-4 border-yellow-400 bg-yellow-50 dark:bg-gray-800 dark:border-yellow-600">
                                    <p class="italic text-gray-700 dark:text-gray-300">“Registra tu día laboral típico e identifica dónde se pierde tiempo”</p>
                                </blockquote>
                            </div>
                            <button id="btn-evaluacion-modulo-3" class="inline-block mt-8 px-8 py-3 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105" style="background-color: var(--color-secondary);">Realizar Evaluación del Módulo 3</button>
                            
                            <!-- Contenedor para la Actividad del Módulo 3 -->
                            <section id="evaluacion-modulo-3" class="hidden mt-8">
                                <div class="wordsearch-container">
                                    <div class="wordsearch-header">
                                        <h4>Sopa de Letras: Conceptos Clave</h4>
                                        <p class="text-sm opacity-90">Encuentra las palabras para una gestión eficiente.</p>
                                    </div>
                                    <div class="wordsearch-game-area">
                                        <div class="puzzle-container">
                                            <div class="wordsearch-grid" id="grid-3"></div>
                                        </div>
                                        <div class="wordsearch-sidebar">
                                            <h5 class="text-lg font-bold mb-3">Palabras a encontrar:</h5>
                                            <div id="wordsList-3"></div>
                                            <div class="mt-4 pt-4 border-t dark:border-gray-600">
                                                <h5 class="text-lg font-bold mb-2">Progreso</h5>
                                                <div class="flex justify-between text-sm">
                                                    <span>Encontradas:</span>
                                                    <span id="foundCount-3">0/10</span>
                                                </div>
                                                <div class="flex justify-between text-sm mt-1">
                                                     <span>Tiempo:</span>
                                                    <span id="timer-3">00:00</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Modal de Finalización -->
                                <div class="wordsearch-modal" id="completionModal-3">
                                    <div class="wordsearch-modal-content">
                                        <h2 class="text-2xl font-bold mb-4" style="color: var(--color-primary);">🎉 ¡Felicitaciones!</h2>
                                        <p>Has completado la sopa de letras sobre gestión del tiempo.</p>
                                        <p class="my-4"><strong>Una gestión eficiente no solo mejora la calidad de atención al paciente, sino que también reduce el estrés del equipo.</strong></p>
                                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                             <button id="restart-game-3" class="px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">Jugar de nuevo</button>
                                             <a href="https://script.google.com/macros/s/AKfycbwFCl6G5K9N_noXPMxvmdPsqsIoR9tC3pfPPxPNHIp2nE1jm5mO9sgRI4by_npUnlSU/exec" target="_blank" rel="noopener noreferrer" class="inline-block px-6 py-2 text-white font-bold rounded-lg shadow-lg transition-transform transform hover:scale-105" style="background-color: var(--color-primary);">Ir a la Evaluación Final</a>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </section>
                        
                         <!-- Sección: Formatos de apoyo -->
                        <section id="formatos" class="course-section mb-12 pt-4">
                            <h2 class="text-3xl font-bold border-b-2 pb-2" style="border-color: var(--color-accent);">Formatos de Apoyo</h2>
                            <p class="mt-4">Descarga estos recursos para aplicar lo aprendido en tu día a día.</p>
                            <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://drive.google.com/file/d/1PLlMNN3xDBc1CcEwARUknbY0MHDs7T-p/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-xl transition-shadow transform hover:-translate-y-1">
                                    <svg class="w-8 h-8 text-white flex-shrink-0" style="color: var(--color-primary);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                    <div>
                                        <span class="font-bold text-lg">Matriz Eisenhower</span>
                                        <span class="text-sm text-gray-500 dark:text-gray-400 block">Formato PDF</span>
                                    </div>
                                </a>
                                <a href="https://drive.google.com/file/d/1AaFAoj7-pyoJQcrsDuw9EW09vj3BGyfB/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-xl transition-shadow transform hover:-translate-y-1">
                                     <svg class="w-8 h-8 text-white flex-shrink-0" style="color: var(--color-primary);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                    <div>
                                        <span class="font-bold text-lg">Objetivos SMART</span>
                                        <span class="text-sm text-gray-500 dark:text-gray-400 block">Formato PDF</span>
                                    </div>
                                </a>
                                <a href="https://drive.google.com/file/d/1r6NkytpSV3Sqvjq5ztjbBedV9h1btJAl/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-xl transition-shadow transform hover:-translate-y-1">
                                     <svg class="w-8 h-8 text-white flex-shrink-0" style="color: var(--color-primary);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                    <div>
                                        <span class="font-bold text-lg">Planeador Diario</span>
                                        <span class="text-sm text-gray-500 dark:text-gray-400 block">Formato PDF</span>
                                    </div>
                                </a>
                            </div>
                        </section>

                        <!-- Sección: Conclusión -->
                        <section id="conclusion" class="course-section mb-12 pt-4">
                            <h2 class="text-3xl font-bold border-b-2 pb-2" style="border-color: var(--color-accent);">Conclusión</h2>
                            <p class="mt-4">La gestión del tiempo en una clínica no se trata solo de cumplir horarios, sino de garantizar calidad en la atención, eficiencia en los procesos y bienestar en el equipo de trabajo.</p>
                            <p>Al aplicar las herramientas aprendidas, el personal de salud podrá responder mejor a las urgencias sin descuidar lo importante, mientras que el personal administrativo organizará sus procesos con mayor fluidez.</p>
                        </section>

                        <section class="course-section mb-12 pt-4">
                            <h2 class="text-3xl font-bold border-b-2 pb-2" style="border-color: var(--color-accent);">Mensajes clave para llevar:</h2>
                            <ul class="mt-4 list-disc list-inside space-y-2">
                                <li><strong>El tiempo es irrecuperable:</strong> Inviértelo sabiamente en lo que impacta positivamente a pacientes y equipo.</li>
                                <li><strong>La implementación continua es clave:</strong> Comienza con pequeños cambios y ajusta según necesites.</li>
                                <li><strong>Beneficios colectivos:</strong> Una clínica con personal eficiente es más resiliente y humana.</li>
                            </ul>
                            <p class="mt-4">Les animamos a aplicar inmediatamente lo aprendido y compartir experiencias en futuras sesiones de seguimiento. Recuerden, una buena gestión del tiempo no solo beneficia su trabajo, sino también su vida personal.</p>
                            <p class="mt-4 font-semibold">¡Gracias por participar y éxito en su aplicación diaria!</p>
                        </section>

                    </article>
                </main>

            </div>
        </div>

        <!-- ===== FOOTER ===== -->
        <footer class="bg-gray-100 dark:bg-gray-800 mt-12">
            <div class="container mx-auto px-4 py-6 text-center text-gray-600 dark:text-gray-400">
                <p>&copy; 2024 Institución de Salud. Todos los derechos reservados.</p>
                <p class="text-sm">Curso de Gestión del Tiempo en Entornos Clínicos.</p>
            </div>
        </footer>

        <!-- Botón Volver Arriba -->
        <button id="back-to-top" title="Volver arriba" class="fixed bottom-5 right-5 w-12 h-12 rounded-full text-white shadow-lg hidden justify-center items-center transition-opacity" style="background-color: var(--color-primary);">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
        </button>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script defer>
        document.addEventListener('DOMContentLoaded', function () {
            // --- ELEMENTOS DEL DOM ---
            const themeToggle = document.getElementById('theme-toggle');
            const themeIconLight = document.getElementById('theme-icon-light');
            const themeIconDark = document.getElementById('theme-icon-dark');
            const menuToggle = document.getElementById('menu-toggle');
            const tocSidebar = document.getElementById('toc-sidebar');
            const overlay = document.getElementById('overlay');
            const backToTopButton = document.getElementById('back-to-top');
            const progressBar = document.getElementById('progressBar');
            const searchInput = document.getElementById('search-input');
            const courseContent = document.getElementById('curso-contenido');
            const courseItems = courseContent.querySelectorAll('.course-section-item');
            const tocLinks = document.querySelectorAll('.toc-link');
            const courseSections = document.querySelectorAll('.course-section');
            const btnEvaluacion1 = document.getElementById('btn-evaluacion-modulo-1');
            const evaluacionContainer1 = document.getElementById('evaluacion-modulo-1');
            const btnEvaluacion2 = document.getElementById('btn-evaluacion-modulo-2');
            const evaluacionContainer2 = document.getElementById('evaluacion-modulo-2');
            const btnEvaluacion3 = document.getElementById('btn-evaluacion-modulo-3');
            const evaluacionContainer3 = document.getElementById('evaluacion-modulo-3');

            // --- MODO OSCURO ---
            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    themeIconLight.classList.add('hidden');
                    themeIconDark.classList.remove('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    themeIconLight.classList.remove('hidden');
                    themeIconDark.classList.add('hidden');
                }
            };

            const currentTheme = localStorage.getItem('theme') || 'light';
            applyTheme(currentTheme);

            themeToggle.addEventListener('click', () => {
                const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });

            // --- MENÚ LATERAL MÓVIL (TOC) ---
            const toggleMenu = () => {
                tocSidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
                document.body.classList.toggle('overflow-hidden');
            };

            menuToggle.addEventListener('click', toggleMenu);
            overlay.addEventListener('click', toggleMenu);
            
            // Cerrar menú al hacer clic en un enlace del TOC en móvil
            tocLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 1024) {
                        toggleMenu();
                    }
                });
            });


            // --- BARRA DE PROGRESO ---
            const updateProgressBar = () => {
                const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
                if (scrollHeight - clientHeight > 0) {
                    const scrollPercent = (scrollTop / (scrollHeight - clientHeight)) * 100;
                    progressBar.style.width = `${scrollPercent}%`;
                } else {
                    progressBar.style.width = '0%';
                }
            };


            // --- BOTÓN VOLVER ARRIBA ---
            const handleScroll = () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.remove('hidden');
                    backToTopButton.classList.add('flex');
                } else {
                    backToTopButton.classList.add('hidden');
                    backToTopButton.classList.remove('flex');
                }
                updateProgressBar();
            };
            
            window.addEventListener('scroll', handleScroll, { passive: true });

            backToTopButton.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });


            // --- BÚSQUEDA EN VIVO ---
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                courseContent.querySelectorAll('section, article').forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        item.style.display = '';
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                // Si la búsqueda está vacía, mostrar todo de nuevo
                if (searchTerm === '') {
                     courseContent.querySelectorAll('section, article').forEach(item => {
                         item.style.display = '';
                     });
                }
            });

            // --- TOC ACTIVO CON INTERSECTION OBSERVER ---
            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -70% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        const activeLink = document.querySelector(`.toc-link[href="#${id}"]`);

                        tocLinks.forEach(link => link.classList.remove('active'));
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, observerOptions);

            // Observar todas las secciones con un ID
            document.querySelectorAll('section[id]').forEach(section => {
                observer.observe(section);
            });
            // Observar también los articles (temas) con un ID
            document.querySelectorAll('article[id]').forEach(article => {
                observer.observe(article);
            });

            // --- LÓGICA PARA LA ACTIVIDAD DEL MÓDULO 1 ---
            const startModule1Game = () => {
                const cardData = [
                    { id: 1, content: 'Urgente' },
                    { id: 2, content: 'Importante' },
                    { id: 3, content: 'No Urgente' },
                    { id: 4, content: 'No Importante' },
                    { id: 5, content: 'Atender una emergencia vital.' },
                    { id: 6, content: 'Planificar la capacitación.' },
                    { id: 7, content: 'Agendar citas de seguimiento.' },
                    { id: 8, content: 'Responder correos no esenciales.' },
                ];

                let hasFlippedCard = false;
                let lockBoard = false;
                let firstCard, secondCard;
                let matchedPairs = 0;

                const gameBoard = document.getElementById('memorama-game-board-1');
                const congratsMessage = document.getElementById('memorama-congrats-1');
                const progressBar = document.getElementById('memorama-progress-bar-1');
                const progressBarContainer = evaluacionContainer1.querySelector('.memorama-progress-bar-container');

                function shuffle(array) {
                    for (let i = array.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [array[i], array[j]] = [array[j], array[i]];
                    }
                    return array;
                }

                function createBoard() {
                    const cards = shuffle([...cardData, ...cardData]); // Duplicamos para crear 8 pares (16 tarjetas)
                    gameBoard.innerHTML = '';
                    cards.forEach((card, index) => {
                        const cardElement = document.createElement('div');
                        cardElement.classList.add('memorama-card');
                        cardElement.dataset.pair = card.id;
                        cardElement.dataset.cardIndex = index; // Índice único para cada tarjeta
                        cardElement.setAttribute('role', 'button');
                        cardElement.setAttribute('tabindex', '0');
                        cardElement.setAttribute('aria-label', 'Tarjeta');
                        cardElement.innerHTML = `
                            <div class="memorama-card-inner">
                                <div class="memorama-card-face memorama-card-back"></div>
                                <div class="memorama-card-face memorama-card-front">${card.content}</div>
                            </div>
                        `;
                        cardElement.addEventListener('click', () => flipCard.call(cardElement));
                        cardElement.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                flipCard.call(cardElement);
                            }
                        });
                        gameBoard.appendChild(cardElement);
                    });
                }

                function flipCard() {
                    if (lockBoard || this === firstCard || this.querySelector('.memorama-card-inner').classList.contains('is-flipped')) return;

                    this.querySelector('.memorama-card-inner').classList.add('is-flipped');
                    this.setAttribute('aria-label', 'Tarjeta volteada: ' + this.querySelector('.memorama-card-front').textContent);

                    if (!hasFlippedCard) {
                        hasFlippedCard = true;
                        firstCard = this;
                        return;
                    }

                    secondCard = this;
                    checkForMatch();
                }

                function checkForMatch() {
                    let isMatch = firstCard.dataset.pair === secondCard.dataset.pair;
                    isMatch ? disableCards() : unflipCards();
                }

                function disableCards() {
                    firstCard.removeEventListener('click', flipCard);
                    firstCard.removeEventListener('keydown', flipCard);
                    secondCard.removeEventListener('click', flipCard);
                    secondCard.removeEventListener('keydown', flipCard);

                    firstCard.removeAttribute('tabindex');
                    secondCard.removeAttribute('tabindex');
                    matchedPairs++;
                    updateProgressBar();
                    resetBoard();
                    checkWin();
                }

                function unflipCards() {
                    lockBoard = true;
                    setTimeout(() => {
                        firstCard.querySelector('.memorama-card-inner').classList.remove('is-flipped');
                        secondCard.querySelector('.memorama-card-inner').classList.remove('is-flipped');
                        firstCard.setAttribute('aria-label', 'Tarjeta');
                        secondCard.setAttribute('aria-label', 'Tarjeta');
                        resetBoard();
                    }, 1200);
                }

                function resetBoard() {
                    [hasFlippedCard, lockBoard] = [false, false];
                    [firstCard, secondCard] = [null, null];
                }

                function updateProgressBar() {
                    const totalPairs = cardData.length;
                    const percentage = (matchedPairs / totalPairs) * 100;
                    progressBar.style.width = percentage + '%';
                    progressBarContainer.setAttribute('aria-valuenow', percentage);
                }

                function checkWin() {
                    if (matchedPairs === cardData.length) { // Chequear contra el total de pares (8)
                        setTimeout(() => {
                            congratsMessage.style.display = 'block';
                            congratsMessage.focus();
                        }, 500);
                    }
                }
                
                createBoard();
            };

            btnEvaluacion1.addEventListener('click', () => {
                btnEvaluacion1.style.display = 'none';
                evaluacionContainer1.classList.remove('hidden');
                startModule1Game();
            }, { once: true });

            // --- LÓGICA PARA LA ACTIVIDAD DEL MÓDULO 2 (EISENHOWER) ---
            const startModule2Game = () => {
                const tasksData = [
                    { id: 'task-1', text: 'Atender a un paciente en emergencia con código rojo', correctQuadrant: 'do' },
                    { id: 'task-2', text: 'Revisar y responder correos administrativos', correctQuadrant: 'delegate' },
                    { id: 'task-3', text: 'Planificar el programa de capacitación del próximo semestre', correctQuadrant: 'plan' },
                    { id: 'task-4', text: 'Ordenar suministros de oficina no esenciales', correctQuadrant: 'eliminate' },
                    { id: 'task-5', text: 'Preparar la presentación para el simposio del mes siguiente', correctQuadrant: 'plan' },
                    { id: 'task-6', text: 'Llamar a un familiar para un asunto no urgente', correctQuadrant: 'eliminate' },
                    { id: 'task-7', text: 'Resolver un problema de software que detuvo la facturación', correctQuadrant: 'do' },
                    { id: 'task-8', text: 'Asistir a una reunión de personal sin agenda clara', correctQuadrant: 'delegate' }
                ];

                const taskListElement = document.getElementById('task-list-2');
                const quadrants = evaluacionContainer2.querySelectorAll('.quadrant');
                const progressBarFill = document.getElementById('eisenhower-progress-bar-2');
                const progressBarContainer = document.getElementById('progress-bar-container-2');
                const feedbackMessage = document.getElementById('feedback-message-2');

                let correctTasks = 0;
                let draggedElement = null;

                function createTasks() {
                    tasksData.forEach(task => {
                        const li = document.createElement('li');
                        li.textContent = task.text;
                        li.id = task.id;
                        li.classList.add('task-item');
                        li.setAttribute('draggable', 'true');
                        li.setAttribute('data-correct-quadrant', task.correctQuadrant);
                        li.setAttribute('role', 'listitem');
                        taskListElement.appendChild(li);
                    });
                }

                function updateProgress() {
                    const progressPercentage = (correctTasks / tasksData.length) * 100;
                    progressBarFill.style.width = `${progressPercentage}%`;
                    progressBarContainer.setAttribute('aria-valuenow', progressPercentage);
                    
                    if (correctTasks === tasksData.length) {
                        feedbackMessage.style.display = 'block';
                        feedbackMessage.querySelector('a').focus();
                    }
                }
                
                function processDrop(element, dropTarget) {
                    if (dropTarget && element) {
                        const correctQuadrant = element.getAttribute('data-correct-quadrant');
                        const droppedQuadrant = dropTarget.getAttribute('data-quadrant');
                        
                        const existingFeedback = element.querySelector('.feedback-message');
                        if(existingFeedback) { existingFeedback.remove(); }

                        if (correctQuadrant === droppedQuadrant) {
                            dropTarget.appendChild(element);
                            element.setAttribute('draggable', 'false');
                            element.style.cursor = 'default';
                            
                            const feedback = document.createElement('span');
                            feedback.textContent = '¡Correcto!';
                            feedback.classList.add('feedback-message', 'feedback-correct');
                            element.appendChild(feedback);
                            
                            correctTasks++;
                            updateProgress();
                        } else {
                            const feedback = document.createElement('span');
                            feedback.textContent = '¡Incorrecto!';
                            feedback.classList.add('feedback-message', 'feedback-incorrect');
                            element.appendChild(feedback);
                        }
                    }
                }

                // --- Eventos de Ratón ---
                taskListElement.addEventListener('dragstart', e => {
                    if(!e.target.classList.contains('task-item')) return;
                    draggedElement = e.target;
                    e.dataTransfer.setData('text/plain', draggedElement.id);
                    setTimeout(() => e.target.classList.add('dragging'), 0);
                });

                document.addEventListener('dragend', e => {
                    if(draggedElement) draggedElement.classList.remove('dragging');
                });

                quadrants.forEach(quadrant => {
                    quadrant.addEventListener('dragover', e => {
                        e.preventDefault();
                        quadrant.classList.add('dragover');
                    });
                    quadrant.addEventListener('dragleave', e => {
                        quadrant.classList.remove('dragover');
                    });
                    quadrant.addEventListener('drop', e => {
                        e.preventDefault();
                        quadrant.classList.remove('dragover');
                        const id = e.dataTransfer.getData('text/plain');
                        const element = document.getElementById(id);
                        processDrop(element, quadrant);
                    });
                });

                // --- Eventos Táctiles (Móvil) ---
                let touchStartX, touchStartY;
                let currentDropTarget = null;
                
                taskListElement.addEventListener('touchstart', e => {
                    if (!e.target.classList.contains('task-item') || e.target.draggable === false) return;
                    draggedElement = e.target;
                    draggedElement.classList.add('dragging');
                    const touch = e.touches[0];
                    touchStartX = touch.clientX;
                    touchStartY = touch.clientY;
                }, { passive: false });

                document.addEventListener('touchmove', e => {
                    if (!draggedElement) return;
                    e.preventDefault();
                    
                    const touch = e.touches[0];
                    
                    quadrants.forEach(q => q.classList.remove('dragover'));
                    
                    const elementUnderTouch = document.elementFromPoint(touch.clientX, touch.clientY);
                    currentDropTarget = elementUnderTouch ? elementUnderTouch.closest('.quadrant') : null;
                    
                    if (currentDropTarget) {
                        currentDropTarget.classList.add('dragover');
                    }
                    
                }, { passive: false });

                document.addEventListener('touchend', e => {
                    if (!draggedElement) return;
                    
                    draggedElement.classList.remove('dragging');
                    quadrants.forEach(q => q.classList.remove('dragover'));

                    if (currentDropTarget) {
                        processDrop(draggedElement, currentDropTarget);
                    }
                    
                    draggedElement = null;
                    currentDropTarget = null;
                });
                
                createTasks();
            };

            btnEvaluacion2.addEventListener('click', () => {
                btnEvaluacion2.style.display = 'none';
                evaluacionContainer2.classList.remove('hidden');
                startModule2Game();
            }, { once: true });
            
            // --- LÓGICA PARA LA ACTIVIDAD DEL MÓDULO 3 (SOPA DE LETRAS) ---
            const startModule3Game = () => {
                const words = ['PRIORIDADES', 'URGENTE', 'IMPORTANTE', 'AGENDA', 'DELEGACION', 'EQUIPO', 'ESTRES', 'PACIENTE', 'AUTOCUIDADO', 'ORGANIZACION'];
                const gridSize = 15;
                let grid = [];
                let foundWords = [];
                let isSelecting = false;
                let selectedCells = [];
                let startTime;
                let timerInterval;

                const gridElement = document.getElementById('grid-3');
                const wordsListElement = document.getElementById('wordsList-3');
                const foundCountElement = document.getElementById('foundCount-3');
                const timerElement = document.getElementById('timer-3');
                const modalElement = document.getElementById('completionModal-3');
                const restartButton = document.getElementById('restart-game-3');

                function initializeGrid() {
                    grid = Array(gridSize).fill().map(() => Array(gridSize).fill(''));
                    words.forEach(placeWordInGrid);
                    fillEmptySpaces();
                    renderGrid();
                    renderWordsList();
                    startTimer();
                }

                function placeWordInGrid(word) {
                    let placed = false;
                    let attempts = 0;
                    while (!placed && attempts < 500) {
                        const direction = Math.floor(Math.random() * 8);
                        const startRow = Math.floor(Math.random() * gridSize);
                        const startCol = Math.floor(Math.random() * gridSize);
                        if (canPlaceWord(word, startRow, startCol, direction)) {
                            placeWord(word, startRow, startCol, direction);
                            placed = true;
                        }
                        attempts++;
                    }
                }

                function canPlaceWord(word, row, col, direction) {
                    const directions = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];
                    const [dRow, dCol] = directions[direction];
                    for (let i = 0; i < word.length; i++) {
                        const newRow = row + i * dRow;
                        const newCol = col + i * dCol;
                        if (newRow < 0 || newRow >= gridSize || newCol < 0 || newCol >= gridSize || (grid[newRow][newCol] !== '' && grid[newRow][newCol] !== word[i])) {
                            return false;
                        }
                    }
                    return true;
                }

                function placeWord(word, row, col, direction) {
                    const directions = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];
                    const [dRow, dCol] = directions[direction];
                    for (let i = 0; i < word.length; i++) {
                        grid[row + i * dRow][col + i * dCol] = word[i];
                    }
                }

                function fillEmptySpaces() {
                    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                    for (let i = 0; i < gridSize; i++) {
                        for (let j = 0; j < gridSize; j++) {
                            if (grid[i][j] === '') {
                                grid[i][j] = letters[Math.floor(Math.random() * letters.length)];
                            }
                        }
                    }
                }

                function renderGrid() {
                    gridElement.innerHTML = '';
                    for (let i = 0; i < gridSize; i++) {
                        for (let j = 0; j < gridSize; j++) {
                            const cell = document.createElement('div');
                            cell.className = 'wordsearch-cell';
                            cell.textContent = grid[i][j];
                            cell.dataset.row = i;
                            cell.dataset.col = j;
                            gridElement.appendChild(cell);
                        }
                    }
                }

                function renderWordsList() {
                    wordsListElement.innerHTML = '';
                    words.forEach(word => {
                        const wordItem = document.createElement('div');
                        wordItem.className = 'word-item';
                        if (foundWords.includes(word)) {
                            wordItem.classList.add('found');
                        }
                        wordItem.innerHTML = `<span>${word}</span>${foundWords.includes(word) ? '<span class="checkmark">✓</span>' : ''}`;
                        wordsListElement.appendChild(wordItem);
                    });
                }
                
                function startSelection(target) {
                    if (target.classList.contains('wordsearch-cell')) {
                        isSelecting = true;
                        selectedCells = [target];
                        target.classList.add('selected');
                    }
                }

                function continueSelection(target) {
                    if (!isSelecting || !target.classList.contains('wordsearch-cell')) return;
                    if (!selectedCells.includes(target)) {
                        selectedCells.push(target);
                        target.classList.add('selected');
                    }
                }

                function endSelection() {
                    if (!isSelecting) return;
                    isSelecting = false;
                    const selectedWord = selectedCells.map(cell => cell.textContent).join('');
                    const reversedWord = selectedWord.split('').reverse().join('');

                    const checkWord = (wordToCheck) => {
                         if (words.includes(wordToCheck) && !foundWords.includes(wordToCheck)) {
                            foundWords.push(wordToCheck);
                            selectedCells.forEach(cell => {
                                cell.classList.remove('selected');
                                cell.classList.add('found');
                            });
                            updateProgress();
                            return true;
                        }
                        return false;
                    }

                    if (!checkWord(selectedWord) && !checkWord(reversedWord)) {
                         selectedCells.forEach(cell => cell.classList.remove('selected'));
                    }
                    selectedCells = [];
                }

                function updateProgress() {
                    foundCountElement.textContent = `${foundWords.length}/${words.length}`;
                    if (foundWords.length === words.length) {
                        clearInterval(timerInterval);
                        setTimeout(() => { modalElement.style.display = 'flex'; }, 500);
                    }
                    renderWordsList();
                }

                function startTimer() {
                    startTime = Date.now();
                    timerInterval = setInterval(() => {
                        const elapsed = Math.floor((Date.now() - startTime) / 1000);
                        const minutes = Math.floor(elapsed / 60);
                        const seconds = elapsed % 60;
                        timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    }, 1000);
                }

                function restartGame() {
                    foundWords = [];
                    selectedCells = [];
                    isSelecting = false;
                    clearInterval(timerInterval);
                    modalElement.style.display = 'none';
                    foundCountElement.textContent = `0/${words.length}`;
                    timerElement.textContent = '00:00';
                    initializeGrid();
                }
                
                // --- Eventos de Ratón ---
                gridElement.addEventListener('mousedown', e => startSelection(e.target));
                gridElement.addEventListener('mouseover', e => continueSelection(e.target));
                document.addEventListener('mouseup', endSelection);

                // --- Eventos Táctiles ---
                gridElement.addEventListener('touchstart', e => {
                    e.preventDefault();
                    startSelection(e.touches[0].target);
                }, { passive: false });

                gridElement.addEventListener('touchmove', e => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const element = document.elementFromPoint(touch.clientX, touch.clientY);
                    if (element) {
                        continueSelection(element);
                    }
                }, { passive: false });

                gridElement.addEventListener('touchend', endSelection);
                
                restartButton.addEventListener('click', restartGame);

                initializeGrid();
            };

            btnEvaluacion3.addEventListener('click', () => {
                btnEvaluacion3.style.display = 'none';
                evaluacionContainer3.classList.remove('hidden');
                startModule3Game();
            }, { once: true });
        });
    </script>
</body>
</html>




